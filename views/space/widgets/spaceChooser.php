<?php

use humhub\modules\ui\icon\widgets\Icon;
use humhub\modules\ui\view\components\View;
use humhub\modules\directory\permissions\AccessDirectory;
use humhub\modules\space\assets\SpaceChooserAsset;
use humhub\modules\space\models\Membership;
use humhub\modules\space\models\Space;
use humhub\modules\space\widgets\SpaceChooserItem;
use humhub\modules\space\widgets\Image;
use yii\helpers\Url;


/* @var $this View */
/* @var $currentSpace Space */
/* @var $memberships Membership[] */
/* @var $followSpaces Space[] */
/* @var $canCreateSpace boolean */

SpaceChooserAsset::register($this);

$noSpaceView = 
    '<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="82" height="83" viewBox="0 0 82 83" fill="none"><g id="Group 4272"><g id="Group 3983"><path id="Vector" d="M55.3223 44.4744C61.3344 41.6071 66.6043 37.3917 70.7219 32.156C74.8396 26.9203 77.6942 20.8054 79.0637 14.2869C79.1093 14.0697 79.0667 13.8434 78.9453 13.6576C78.824 13.4718 78.6338 13.3419 78.4167 13.2964C68.9925 11.3177 59.1774 12.5456 50.5312 16.785C47.1943 18.4174 44.0787 20.4677 41.2592 22.8864C40.3801 23.2009 39.4209 23.211 38.5354 22.9151C37.6499 22.6192 36.8894 22.0343 36.3761 21.2545C35.5319 19.9622 34.2092 19.0579 32.6986 18.7403C31.188 18.4226 29.6131 18.7177 28.32 19.5605L18.5341 25.8506C18.441 25.9106 18.3606 25.9885 18.2978 26.0797C18.235 26.171 18.1909 26.2739 18.1682 26.3823C18.1454 26.4908 18.1445 26.6027 18.1653 26.7115C18.1862 26.8203 18.2284 26.9239 18.2897 27.0163L22.0098 32.6346C22.9501 34.0463 24.3031 35.1333 25.8842 35.7475C27.4653 36.3616 29.1973 36.4729 30.844 36.0662C30.8391 36.0757 30.8341 36.0849 30.8293 36.0943C30.7626 36.2254 30.7316 36.3718 30.7396 36.5188C30.7475 36.6657 30.7941 36.8079 30.8746 36.9311L32.7406 39.7882L26.7063 39.8009C26.5557 39.8012 26.408 39.8422 26.2787 39.9195C26.1494 39.9967 26.0434 40.1075 25.9718 40.24C25.9003 40.3725 25.8658 40.5219 25.8721 40.6724C25.8784 40.8229 25.9252 40.9689 26.0075 41.095L28.3045 44.6112C27.7308 44.0812 27.0771 43.6449 26.3674 43.3187C26.1415 43.2153 25.9126 43.1236 25.6889 43.0467C25.4092 42.9499 25.1239 42.8699 24.8347 42.807C23.8781 42.5978 22.8894 42.582 21.9266 42.7606C20.9638 42.9391 20.0465 43.3083 19.2285 43.8465C18.3872 44.3861 17.6619 45.0881 17.0951 45.9114C16.5283 46.7346 16.1314 47.6627 15.9275 48.6411C15.8826 48.8547 15.923 49.0774 16.04 49.2616C16.157 49.4459 16.3414 49.5771 16.5538 49.6273L17.168 49.7725C15.626 51.1761 14.693 53.1263 14.5676 55.2076C14.5657 55.4011 14.6311 55.5891 14.7526 55.7397C14.8741 55.8902 15.0442 55.9938 15.2336 56.0329L17.4705 56.502C17.6876 56.5476 17.914 56.505 18.0998 56.3836C18.2855 56.2623 18.4155 56.0721 18.461 55.855C18.5065 55.6378 18.464 55.4115 18.3426 55.2257C18.2213 55.04 18.0311 54.91 17.814 54.8645L16.3224 54.5516C16.5282 53.4551 17.2017 51.4369 19.5513 50.1031C19.6974 50.0203 19.8151 49.8953 19.8891 49.7445C19.9631 49.5938 19.9899 49.4242 19.9661 49.2579C19.9423 49.0917 19.8688 48.9365 19.7555 48.8126C19.6421 48.6887 19.494 48.6018 19.3305 48.5634L17.7884 48.1992C18.2261 46.9847 19.0522 45.9485 20.1387 45.2513C20.7659 44.8387 21.4685 44.5541 22.2061 44.4136C22.9436 44.2732 23.7016 44.2798 24.4366 44.4331L24.4793 44.4421C24.6095 44.4702 24.7388 44.5046 24.8673 44.5419C24.3054 44.7318 23.7949 45.0486 23.3754 45.4677C22.9558 45.8869 22.6386 46.3971 22.4482 46.9588L21.1829 50.6539C21.1446 50.7661 21.1304 50.8851 21.1415 51.0031C21.1526 51.1211 21.1886 51.2354 21.2472 51.3385C21.3058 51.4415 21.3856 51.5309 21.4814 51.6008C21.5771 51.6706 21.6866 51.7193 21.8026 51.7437C21.8362 51.7507 21.8703 51.7557 21.9045 51.7586L25.7966 52.0846C26.3882 52.1345 26.9832 52.0478 27.5359 51.831C28.0885 51.6143 28.584 51.2734 28.9839 50.8347C28.9647 50.9847 28.9415 51.1351 28.9104 51.285C28.7562 52.0295 28.456 52.7361 28.027 53.3639C27.5981 53.9916 27.0489 54.5281 26.4113 54.9423C26.3177 55.0017 26.2369 55.079 26.1734 55.1698C26.11 55.2607 26.0652 55.3632 26.0417 55.4715C26.0182 55.5798 26.0165 55.6917 26.0366 55.8007C26.0567 55.9097 26.0983 56.0136 26.1589 56.1064C26.2195 56.1991 26.2979 56.279 26.3896 56.3412C26.4813 56.4034 26.5844 56.4468 26.693 56.4688C26.8017 56.4908 26.9136 56.491 27.0222 56.4694C27.1309 56.4478 27.2343 56.4049 27.3262 56.343C28.2777 55.722 29.0747 54.8917 29.6561 53.9155C30.2375 52.9393 30.588 51.8431 30.6807 50.7106C30.7013 50.4766 30.7101 50.2361 30.7073 49.9956C30.6971 49.2032 30.5602 48.4175 30.3018 47.6683L32.55 51.1095C32.631 51.2336 32.7436 51.3339 32.8761 51.4001C33.0086 51.4664 33.1564 51.4963 33.3043 51.4867C33.4521 51.4772 33.5948 51.4285 33.7177 51.3457C33.8406 51.2629 33.9393 51.149 34.0037 51.0155L36.5816 45.668L38.2598 48.2372C38.3399 48.3597 38.4507 48.4591 38.5813 48.5254C38.7118 48.5917 38.8574 48.6227 39.0036 48.6152C39.0555 48.6118 39.1068 48.6083 39.1587 48.6049C38.095 49.9501 37.4776 51.5936 37.3925 53.3063C37.3074 55.0191 37.7589 56.7157 38.684 58.1596L42.3276 63.8526C42.4441 64.0481 42.6328 64.19 42.8529 64.2477C43.0778 64.2834 43.3076 64.2293 43.4929 64.097L53.1829 57.6527C54.4751 56.8053 55.3787 55.4804 55.6958 53.9681C56.013 52.4558 55.718 50.8795 54.8752 49.5843C54.3708 48.8042 54.1409 47.8781 54.2218 46.9526C54.3028 46.0271 54.69 45.1551 55.3223 44.4744ZM77.2444 14.7687C76.6723 17.2485 75.8737 19.6705 74.8586 22.0042C72.412 19.8893 70.6038 17.1339 69.6371 14.0478C72.1897 14.0534 74.7362 14.2948 77.2444 14.7687ZM23.4044 31.7108L20.1523 26.7995L29.2292 20.9644C30.1508 20.3625 31.2739 20.1512 32.3512 20.3772C33.4286 20.6032 34.3721 21.2478 34.9742 22.1694C35.4449 22.8855 36.0674 23.4893 36.7974 23.938C37.5275 24.3867 38.3473 24.6693 39.1988 24.7659C36.4438 27.4425 34.0567 30.4732 32.1 33.7785C30.6577 34.5973 28.9588 34.8393 27.3453 34.4556C25.7318 34.072 24.3236 33.0912 23.4044 31.7108ZM28.0758 49.2417C27.8746 49.6266 27.5641 49.9436 27.1834 50.1527C26.8026 50.3618 26.3685 50.4537 25.9357 50.4169L23.1134 50.1811L24.0313 47.5025C24.1768 47.0838 24.4441 46.7182 24.7988 46.4524C25.1536 46.1867 25.5797 46.033 26.0224 46.0111C26.4102 45.9944 26.7955 46.0801 27.1397 46.2595C27.4838 46.439 27.7746 46.706 27.9828 47.0336C28.191 47.3611 28.3093 47.7378 28.3257 48.1256C28.3421 48.5134 28.2561 48.8986 28.0763 49.2426L28.0758 49.2417ZM33.14 48.9537L28.2517 41.4708L33.8322 41.4588L35.5128 44.031L33.14 48.9537ZM39.3954 46.9162L32.5415 36.4241C32.795 35.9397 33.0585 35.4608 33.3319 34.9874C33.3378 34.9835 33.3438 34.9802 33.3496 34.9769L33.3435 34.9675C36.5672 29.4114 41.0216 24.6682 46.3645 21.1024C51.7075 17.5366 57.7967 15.2431 64.1644 14.3979C65.4072 14.2347 66.6525 14.1289 67.9002 14.0805C68.9635 17.807 71.1376 21.1209 74.1325 23.5802C67.6987 36.8218 54.5405 45.954 39.3954 46.9162ZM52.2662 56.2404L43.2807 62.2047L40.09 57.2534C39.1821 55.8365 38.8538 54.1247 39.1729 52.4725C39.4921 50.8202 40.4344 49.3539 41.8047 48.3771C45.5757 47.9345 49.2715 46.9944 52.7956 45.5812C52.5422 46.3996 52.4718 47.2638 52.5894 48.1124C52.707 48.961 53.0097 49.7734 53.4761 50.4921C54.0772 51.4151 54.2874 52.5389 54.0605 53.6167C53.8337 54.6945 53.1883 55.6383 52.2662 56.2406L52.2662 56.2404Z" fill="#B2B1B1"/><path id="Vector_2" d="M23.4162 55.8804C22.9605 55.8921 22.505 55.8502 22.0591 55.7556L20.7692 55.4851C20.5521 55.4395 20.3257 55.4821 20.14 55.6034C19.9542 55.7248 19.8243 55.9149 19.7787 56.1321C19.7332 56.3492 19.7758 56.5756 19.8971 56.7614C20.0185 56.9471 20.2086 57.0771 20.4258 57.1226L21.7156 57.3931C22.2898 57.5147 22.8762 57.5682 23.4629 57.5528C23.6847 57.5465 23.8949 57.4523 24.0473 57.2911C24.1997 57.1298 24.2818 56.9146 24.2755 56.6928C24.2692 56.471 24.1751 56.2608 24.0138 56.1084C23.8525 55.956 23.6373 55.874 23.4155 55.8802L23.4162 55.8804Z" fill="#B2B1B1"/><path id="Vector_3" d="M59.9128 45.874C60.1034 45.9141 60.302 45.8863 60.4741 45.7952C61.1589 45.4345 61.8437 45.0499 62.5089 44.6521C62.6044 44.5963 62.6879 44.5222 62.7546 44.434C62.8212 44.3458 62.8697 44.2452 62.8973 44.1381C62.9249 44.0311 62.9309 43.9196 62.9152 43.8101C62.8994 43.7007 62.862 43.5955 62.8053 43.5006C62.7486 43.4056 62.6737 43.3229 62.5848 43.2571C62.4959 43.1914 62.3949 43.1438 62.2876 43.1174C62.1802 43.0909 62.0687 43.0859 61.9594 43.1028C61.8501 43.1197 61.7453 43.1581 61.651 43.2157C61.0107 43.5981 60.3521 43.9679 59.6935 44.3153C59.5412 44.3955 59.4173 44.5208 59.3389 44.6741C59.2604 44.8274 59.2311 45.0011 59.255 45.1716C59.2789 45.3421 59.3549 45.5011 59.4725 45.6268C59.5901 45.7526 59.7436 45.839 59.9122 45.8743L59.9128 45.874Z" fill="#B2B1B1"/><path id="Vector_4" d="M77.9583 27.1451C77.8619 27.0924 77.756 27.0592 77.6468 27.0474C77.5376 27.0356 77.4271 27.0454 77.3216 27.0763C77.2162 27.1072 77.1179 27.1586 77.0323 27.2275C76.9467 27.2964 76.8755 27.3814 76.8228 27.4778C75.6556 29.6115 74.3027 31.6383 72.7799 33.5346C72.2253 34.225 71.6402 34.9072 71.0409 35.5621C70.3045 36.3666 69.5264 37.1523 68.7275 37.8977C67.4606 39.079 66.1216 40.1805 64.7183 41.1961C64.5385 41.3262 64.4178 41.5223 64.3827 41.7414C64.3475 41.9605 64.4009 42.1846 64.5309 42.3643C64.661 42.5441 64.8572 42.6648 65.0763 42.6999C65.2954 42.7351 65.5194 42.6817 65.6992 42.5516C67.1585 41.4952 68.5509 40.3493 69.8685 39.1206C70.6991 38.3457 71.5086 37.5285 72.2747 36.6915C72.8981 36.0102 73.5067 35.3006 74.0839 34.5822C75.6684 32.6091 77.076 30.5003 78.2905 28.2803C78.3969 28.0857 78.4217 27.8568 78.3594 27.6439C78.2971 27.4311 78.1528 27.2517 77.9583 27.1451Z" fill="#B2B1B1"/><path id="Vector_5" d="M12.6222 31.7117L16.0115 29.4978C16.1034 29.4377 16.1827 29.3601 16.2447 29.2694C16.3067 29.1787 16.3502 29.0767 16.3727 28.9692C16.3953 28.8616 16.3965 28.7507 16.3761 28.6428C16.3558 28.5348 16.3145 28.4319 16.2544 28.3399C16.1943 28.2479 16.1167 28.1687 16.026 28.1067C15.9353 28.0447 15.8333 28.0012 15.7257 27.9786C15.6182 27.956 15.5073 27.9549 15.3993 27.9752C15.2914 27.9955 15.1884 28.0369 15.0965 28.097L11.7073 30.3109C11.6144 30.3705 11.5341 30.448 11.4713 30.5388C11.4084 30.6296 11.3641 30.7319 11.341 30.8399C11.3179 30.9479 11.3164 31.0594 11.3365 31.168C11.3567 31.2765 11.3982 31.38 11.4586 31.4725C11.519 31.565 11.5971 31.6445 11.6884 31.7067C11.7797 31.7688 11.8824 31.8122 11.9905 31.8345C12.0987 31.8567 12.2102 31.8573 12.3186 31.8363C12.427 31.8152 12.5302 31.7729 12.6222 31.7117Z" fill="#B2B1B1"/><path id="Vector_6" d="M9.14566 36.6892C9.26701 36.8749 9.45717 37.0048 9.67431 37.0504C9.89145 37.0959 10.1178 37.0533 10.3035 36.932L14.2875 34.3294C14.3795 34.2693 14.4587 34.1917 14.5207 34.101C14.5827 34.0102 14.6262 33.9082 14.6487 33.8007C14.6713 33.6932 14.6724 33.5822 14.6521 33.4743C14.6318 33.3663 14.5904 33.2634 14.5303 33.1714C14.4702 33.0795 14.3926 33.0002 14.3019 32.9382C14.2112 32.8763 14.1091 32.8328 14.0016 32.8102C13.8941 32.7877 13.7832 32.7865 13.6752 32.8068C13.5672 32.8271 13.4643 32.8685 13.3724 32.9286L9.38841 35.5311C9.29643 35.5912 9.21718 35.6688 9.1552 35.7596C9.09322 35.8503 9.04971 35.9523 9.02717 36.0599C9.00463 36.1674 9.00349 36.2783 9.02382 36.3863C9.04415 36.4943 9.08556 36.5972 9.14566 36.6892Z" fill="#B2B1B1"/><path id="Vector_7" d="M15.6065 33.1744C15.714 33.1971 15.8249 33.1983 15.9329 33.178C16.0409 33.1577 16.1438 33.1162 16.2357 33.056L17.7085 32.094C17.8015 32.0344 17.8817 31.9569 17.9446 31.8662C18.0074 31.7754 18.0517 31.673 18.0748 31.565C18.0979 31.457 18.0995 31.3456 18.0793 31.237C18.0591 31.1284 18.0176 31.0249 17.9572 30.9324C17.8968 30.84 17.8187 30.7604 17.7274 30.6982C17.6361 30.6361 17.5334 30.5927 17.4253 30.5704C17.3171 30.5482 17.2056 30.5476 17.0972 30.5687C16.9888 30.5897 16.8856 30.632 16.7937 30.6932L15.3208 31.6553C15.1823 31.7458 15.0737 31.8754 15.0089 32.0275C14.944 32.1797 14.9257 32.3477 14.9562 32.5103C14.9868 32.6729 15.0649 32.8227 15.1807 32.9409C15.2964 33.0592 15.4446 33.1404 15.6065 33.1744Z" fill="#B2B1B1"/><path id="Vector_8" d="M11.0651 38.1409L6.664 41.0156C6.48022 41.1378 6.35217 41.3277 6.30775 41.5439C6.26332 41.7601 6.30612 41.985 6.42682 42.1698C6.54752 42.3546 6.73634 42.4842 6.95215 42.5303C7.16796 42.5765 7.39327 42.5356 7.57902 42.4164L11.9798 39.5416C12.0727 39.4819 12.153 39.4045 12.2158 39.3137C12.2787 39.2229 12.3229 39.1205 12.3461 39.0125C12.3692 38.9045 12.3707 38.7931 12.3505 38.6845C12.3303 38.5759 12.2888 38.4724 12.2284 38.3799C12.168 38.2875 12.0899 38.2079 11.9986 38.1458C11.9073 38.0837 11.8046 38.0402 11.6964 38.018C11.5882 37.9958 11.4767 37.9952 11.3683 38.0163C11.2599 38.0374 11.1567 38.0797 11.0648 38.1408L11.0651 38.1409Z" fill="#B2B1B1"/><path id="Vector_9" d="M19.6471 33.5342C19.5258 33.3485 19.3356 33.2186 19.1185 33.173C18.9014 33.1275 18.6751 33.1701 18.4894 33.2914L13.3338 36.6588C13.2408 36.7184 13.1606 36.7958 13.0977 36.8866C13.0348 36.9774 12.9906 37.0798 12.9675 37.1877C12.9443 37.2957 12.9428 37.4072 12.963 37.5158C12.9832 37.6244 13.0247 37.7279 13.0851 37.8203C13.1454 37.9128 13.2235 37.9924 13.3148 38.0545C13.4061 38.1167 13.5088 38.1601 13.617 38.1823C13.7252 38.2046 13.8367 38.2052 13.9451 38.1841C14.0535 38.1631 14.1567 38.1207 14.2486 38.0596L19.4044 34.6915C19.5899 34.5702 19.7197 34.3801 19.7653 34.1631C19.8108 33.9461 19.7683 33.7199 19.6471 33.5342Z" fill="#B2B1B1"/><path id="Vector_10" d="M30.2126 63.3382L29.4534 63.8335C29.2676 63.9548 29.1377 64.145 29.0921 64.3622C29.0466 64.5793 29.0892 64.8057 29.2106 64.9914C29.3319 65.1772 29.5221 65.3071 29.7392 65.3527C29.9564 65.3982 30.1828 65.3556 30.3685 65.2342L31.1271 64.738C31.3108 64.6158 31.4389 64.4259 31.4833 64.2097C31.5277 63.9935 31.4848 63.7686 31.3641 63.5838C31.2434 63.3991 31.0546 63.2695 30.8387 63.2233C30.6229 63.1772 30.3976 63.2182 30.2119 63.3374L30.2126 63.3382Z" fill="#B2B1B1"/><path id="Vector_11" d="M35.7536 59.7187L32.3644 61.9327C32.2708 61.992 32.19 62.0693 32.1265 62.1602C32.0631 62.251 32.0183 62.3536 31.9948 62.4619C31.9713 62.5702 31.9696 62.6821 31.9897 62.7911C32.0098 62.9 32.0514 63.0039 32.112 63.0967C32.1726 63.1895 32.251 63.2693 32.3427 63.3315C32.4344 63.3937 32.5375 63.4371 32.6462 63.4591C32.7548 63.4811 32.8667 63.4814 32.9754 63.4598C33.084 63.4382 33.1874 63.3952 33.2793 63.3334L36.6685 61.1194C36.8509 60.9967 36.9777 60.807 37.0214 60.5915C37.0651 60.376 37.0222 60.1519 36.9019 59.9678C36.7817 59.7837 36.5938 59.6543 36.3789 59.6077C36.1639 59.5611 35.9393 59.601 35.7536 59.7187Z" fill="#B2B1B1"/><path id="Vector_12" d="M29.803 68.3109C29.9243 68.4967 30.1145 68.6266 30.3316 68.6721C30.5488 68.7177 30.7751 68.6751 30.9609 68.5538L34.9449 65.9514C35.0385 65.8921 35.1194 65.8148 35.1828 65.7239C35.2463 65.6331 35.2911 65.5305 35.3146 65.4222C35.338 65.3139 35.3398 65.202 35.3197 65.0931C35.2996 64.9841 35.258 64.8802 35.1974 64.7874C35.1368 64.6946 35.0584 64.6148 34.9667 64.5526C34.875 64.4904 34.7718 64.447 34.6632 64.425C34.5546 64.403 34.4427 64.4027 34.334 64.4243C34.2253 64.4459 34.122 64.4889 34.03 64.5507L30.0459 67.1532C29.8602 67.2745 29.7303 67.4647 29.6847 67.6818C29.6392 67.8989 29.6817 68.1252 29.803 68.3109Z" fill="#B2B1B1"/><path id="Vector_13" d="M35.7343 64.4361C35.7944 64.5281 35.872 64.6074 35.9627 64.6693C36.0534 64.7313 36.1555 64.7749 36.263 64.7974C36.3705 64.82 36.4815 64.8211 36.5894 64.8008C36.6974 64.7805 36.8003 64.7391 36.8923 64.679L38.365 63.7168C38.5508 63.5954 38.6807 63.4052 38.7263 63.1881C38.7718 62.9709 38.7292 62.7445 38.6078 62.5588C38.4864 62.373 38.2962 62.2431 38.079 62.1976C37.8619 62.152 37.6355 62.1946 37.4498 62.316L35.9772 63.2781C35.8852 63.3382 35.8059 63.4158 35.7439 63.5065C35.6819 63.5972 35.6384 63.6993 35.6159 63.8068C35.5933 63.9143 35.5922 64.0252 35.6125 64.1332C35.6328 64.2412 35.6742 64.3441 35.7343 64.4361Z" fill="#B2B1B1"/><path id="Vector_14" d="M31.7217 69.7629L27.321 72.6376C27.228 72.6972 27.1478 72.7747 27.0849 72.8655C27.0221 72.9563 26.9778 73.0586 26.9547 73.1666C26.9315 73.2746 26.93 73.3861 26.9502 73.4946C26.9704 73.6032 27.0119 73.7067 27.0723 73.7992C27.1327 73.8916 27.2107 73.9712 27.302 74.0334C27.3933 74.0955 27.496 74.1389 27.6042 74.1612C27.7124 74.1834 27.8239 74.184 27.9323 74.163C28.0407 74.1419 28.1439 74.0996 28.2358 74.0384L32.6368 71.1637C32.7297 71.104 32.8099 71.0266 32.8728 70.9358C32.9356 70.845 32.9799 70.7426 33.003 70.6346C33.0261 70.5267 33.0276 70.4152 33.0074 70.3066C32.9872 70.198 32.9457 70.0945 32.8853 70.0021C32.8249 69.9096 32.7468 69.83 32.6555 69.7679C32.5642 69.7058 32.4615 69.6624 32.3533 69.6401C32.2452 69.6179 32.1337 69.6173 32.0253 69.6384C31.9169 69.6595 31.8137 69.7018 31.7217 69.7629Z" fill="#B2B1B1"/><path id="Vector_15" d="M39.1476 64.9128L33.9917 68.2809C33.8988 68.3405 33.8186 68.418 33.7557 68.5088C33.6929 68.5996 33.6486 68.7019 33.6255 68.8099C33.6024 68.9179 33.6009 69.0294 33.6211 69.138C33.6413 69.2465 33.6828 69.35 33.7432 69.4425C33.8036 69.5349 33.8817 69.6145 33.973 69.6767C34.0643 69.7388 34.167 69.7822 34.2752 69.8044C34.3833 69.8267 34.4948 69.8273 34.6032 69.8062C34.7116 69.7851 34.8148 69.7428 34.9068 69.6816L40.0625 66.3137C40.1554 66.254 40.2356 66.1766 40.2985 66.0858C40.3614 65.995 40.4057 65.8927 40.4288 65.7847C40.4519 65.6767 40.4534 65.5652 40.4332 65.4566C40.4131 65.348 40.3716 65.2445 40.3112 65.1521C40.2508 65.0596 40.1727 64.98 40.0814 64.9179C39.9901 64.8558 39.8874 64.8123 39.7792 64.7901C39.6711 64.7678 39.5596 64.7672 39.4512 64.7883C39.3427 64.8094 39.2396 64.8517 39.1476 64.9128Z" fill="#B2B1B1"/><path id="Vector_16" d="M64.4155 59.8396C63.7916 59.4719 63.2613 58.9648 62.8662 58.358C62.4711 57.7511 62.2219 57.061 62.1381 56.3417C62.1181 56.1672 62.0436 56.0034 61.9252 55.8736C61.8069 55.7438 61.6507 55.6546 61.4788 55.6185C61.3069 55.5824 61.128 55.6014 60.9674 55.6727C60.8069 55.744 60.6729 55.864 60.5844 56.0158C60.2187 56.6408 59.7132 57.1727 59.1076 57.5696C58.5019 57.9666 57.8125 58.2179 57.0935 58.3038C56.9193 58.3242 56.7558 58.3988 56.6263 58.517C56.4967 58.6353 56.4077 58.7914 56.3717 58.9631C56.3356 59.1348 56.3545 59.3134 56.4256 59.4738C56.4967 59.6342 56.6164 59.7682 56.7678 59.8568C57.3917 60.2244 57.922 60.7315 58.3171 61.3384C58.7122 61.9453 58.9614 62.6354 59.0451 63.3547C59.0652 63.5292 59.1397 63.6929 59.258 63.8227C59.3764 63.9525 59.5326 64.0418 59.7045 64.0778C59.8764 64.1139 60.0553 64.0949 60.2158 64.0236C60.3764 63.9523 60.5104 63.8323 60.5989 63.6806C60.9646 63.0555 61.4701 62.5237 62.0757 62.1267C62.6814 61.7297 63.3707 61.4784 64.0898 61.3925C64.264 61.3722 64.4275 61.2976 64.557 61.1793C64.6865 61.061 64.7756 60.905 64.8116 60.7333C64.8476 60.5616 64.8288 60.3829 64.7577 60.2225C64.6866 60.0622 64.5669 59.9282 64.4155 59.8396ZM60.257 61.4435C59.9578 60.7297 59.5317 60.076 58.9994 59.5142C59.7126 59.2136 60.3655 58.7862 60.9263 58.2528C61.2254 58.9666 61.6515 59.6203 62.1839 60.1821C61.4706 60.4827 60.8178 60.9101 60.257 61.4435Z" fill="#B2B1B1"/><path id="Vector_17" d="M12.9026 16.3221C13.5265 16.6897 14.0567 17.1968 14.4519 17.8037C14.847 18.4106 15.0962 19.1007 15.1799 19.82C15.2 19.9945 15.2745 20.1583 15.3928 20.2881C15.5112 20.4179 15.6674 20.5071 15.8393 20.5432C16.0112 20.5792 16.1901 20.5603 16.3506 20.489C16.5111 20.4177 16.6451 20.2976 16.7336 20.1459C17.0993 19.5209 17.6048 18.989 18.2105 18.5921C18.8161 18.1951 19.5055 17.9438 20.2245 17.8578C20.3988 17.8375 20.5622 17.7629 20.6918 17.6446C20.8213 17.5263 20.9104 17.3703 20.9464 17.1986C20.9824 17.0269 20.9635 16.8483 20.8924 16.6879C20.8213 16.5275 20.7016 16.3935 20.5502 16.3049C19.9263 15.9373 19.3961 15.4302 19.0009 14.8233C18.6058 14.2164 18.3566 13.5263 18.2729 12.807C18.2528 12.6325 18.1783 12.4687 18.06 12.3389C17.9416 12.2091 17.7854 12.1199 17.6135 12.0838C17.4416 12.0478 17.2627 12.0667 17.1022 12.1381C16.9417 12.2094 16.8077 12.3294 16.7192 12.4811C16.3535 13.1061 15.848 13.638 15.2423 14.035C14.6367 14.4319 13.9473 14.6832 13.2283 14.7692C13.054 14.7895 12.8906 14.8641 12.761 14.9824C12.6315 15.1007 12.5424 15.2567 12.5064 15.4284C12.4704 15.6001 12.4893 15.7788 12.5604 15.9391C12.6315 16.0995 12.7512 16.2335 12.9026 16.3221ZM17.061 14.7181C17.3602 15.432 17.7863 16.0856 18.3186 16.6475C17.6054 16.948 16.9526 17.3754 16.3918 17.9089C16.0926 17.1951 15.6665 16.5414 15.1342 15.9795C15.8474 15.679 16.5002 15.2516 17.061 14.7181Z" fill="#B2B1B1"/><path id="Vector_18" d="M56.2514 23.3167C55.2673 23.1108 54.2476 23.1508 53.2826 23.433C52.3177 23.7153 51.4372 24.2311 50.7191 24.9348C50.001 25.6385 49.4675 26.5084 49.1658 27.4674C48.8641 28.4265 48.8035 29.4451 48.9894 30.4332C49.1753 31.4213 49.6019 32.3483 50.2315 33.1321C50.8611 33.916 51.6742 34.5325 52.5989 34.9272C53.5237 35.3218 54.5314 35.4824 55.533 35.3947C56.5345 35.3069 57.499 34.9736 58.3411 34.4243C59.3539 33.7626 60.1478 32.8155 60.6224 31.7026C61.097 30.5898 61.2309 29.3612 61.0072 28.1722C60.7835 26.9833 60.2122 25.8874 59.3657 25.0231C58.5191 24.1588 57.4353 23.5649 56.2512 23.3166L56.2514 23.3167ZM57.426 33.0235C56.6902 33.5042 55.8284 33.7559 54.9495 33.7468C54.0707 33.7377 53.2142 33.4682 52.4886 32.9723C51.7629 32.4765 51.2005 31.7766 50.8726 30.9611C50.5447 30.1456 50.466 29.2513 50.6464 28.3911C50.8269 27.5309 51.2583 26.7435 51.8862 26.1285C52.5141 25.5135 53.3103 25.0985 54.1741 24.9361C55.0378 24.7736 55.9304 24.8709 56.7389 25.2157C57.5473 25.5605 58.2354 26.1372 58.716 26.8731C59.3592 27.8601 59.5846 29.062 59.3428 30.215C59.101 31.3681 58.4116 32.3781 57.426 33.0235Z" fill="#B2B1B1"/></g></g></svg><b class="caret"></b></div>
    <span class="name">' . Yii::t('SpaceModule.chooser', 'Группы') . '</span>';

$this->registerJsConfig('space.chooser', [
    'noSpace' => $noSpaceView,
    'remoteSearchUrl' =>  Url::to(['/space/browse/search-json']),
    'text' => [
        'info.remoteAtLeastInput' => Yii::t('SpaceModule.chooser', 'To search for other spaces, type at least {count} characters.', ['count' => 2]),
        'info.emptyOwnResult' => Yii::t('SpaceModule.chooser', 'No member or following spaces found.'),
        'info.emptyResult' => Yii::t('SpaceModule.chooser', 'No result found for the given filter.'),
    ],
]);

/* @var $directoryModule \humhub\modules\directory\Module */
$directoryModule = Yii::$app->getModule('directory');
$canAccessDirectory = $directoryModule->active && Yii::$app->user->can(AccessDirectory::class);

?>

<div class="item">
    <a id="space-menu" href="#" class="dropdown-toggle" data-toggle="dropdown">
        <!-- start: Show space image and name if chosen -->
        <?php if ($currentSpace) : ?>
            <?= Image::widget([
                'space' => $currentSpace,
                'width' => 32,
                'htmlOptions' => [
                    'class' => 'current-space-image',
                ]
            ]);
            ?>
            <b class="caret"></b>
        <?php endif; ?>

        <?php if (!$currentSpace) : ?>
            <?= $noSpaceView ?>
        <?php endif; ?>
        <!-- end: Show space image and name if chosen -->
    </a>

    <ul class="dropdown-menu" id="space-menu-dropdown">
        <li>
            <form action="" class="dropdown-controls">
                <div <?php if($canAccessDirectory) : ?>class="input-group"<?php endif; ?>>
                    <input type="text" id="space-menu-search" class="form-control" autocomplete="off"
                           placeholder="<?= Yii::t('SpaceModule.chooser', 'Search') ?>"
                           title="<?= Yii::t('SpaceModule.chooser', 'Search for spaces') ?>">
                    <?php if($canAccessDirectory) : ?>
                        <span id="space-directory-link" class="input-group-addon" >
                            <a href="<?= Url::to(['/directory/directory/spaces']) ?>">
                                <?= Icon::get('directory')?>
                            </a>
                        </span>
                    <?php endif; ?>
                    <div class="search-reset" id="space-search-reset"><?= Icon::get('times-circle') ?></div>
                </div>
            </form>
        </li>

        <li class="divider"></li>
        <li>
            <ul class="media-list notLoaded" id="space-menu-spaces">
                <?php foreach ($memberships as $membership) : ?>
                    <?= SpaceChooserItem::widget([
                        'space' => $membership->space,
                        'updateCount' => $membership->countNewItems(),
                        'isMember' => true
                    ]);
                    ?>
                <?php endforeach; ?>
                <?php foreach ($followSpaces as $followSpace) : ?>
                    <?= SpaceChooserItem::widget([
                        'space' => $followSpace,
                        'isFollowing' => true
                    ]);
                    ?>
                <?php endforeach; ?>
            </ul>
        </li>
        <li class="remoteSearch">
            <ul id="space-menu-remote-search" class="media-list notLoaded"></ul>
        </li>

        <?php if ($canCreateSpace) : ?>
        <li>
            <div class="dropdown-footer">
                <a href="#" class="btn btn-info col-md-12" data-action-click="ui.modal.load" data-action-url="<?= Url::to(['/space/create/create']) ?>">
                    <?= Yii::t('SpaceModule.chooser', 'Create new space') ?>
                </a>
            </div>
        </li>
        <?php endif; ?>
    </ul>
</div>
