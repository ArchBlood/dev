<?php

use yii\helpers\Html;

humhub\modules\like\assets\LikeAsset::register($this);
?>

<span class="likeLinkContainer" id="likeLinkContainer_<?= $id ?>">

    <?php if (Yii::$app->user->isGuest): ?>

        <?= Html::a(Yii::t('LikeModule.base', 'Like'), Yii::$app->user->loginUrl, ['data-target' => '#globalModal']); ?>
    <?php else: ?>
        <a href="#" data-action-click="like.toggleLike" data-action-url="<?= $likeUrl ?>" class="like likeAnchor<?= !$canLike ? ' disabled' : '' ?>" style="<?= (!$currentUserLiked) ? '' : 'display:none'?>">
            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="13" viewBox="0 0 15 13" fill="none"><path d="M7.5 13C7.28645 13 7.08057 12.9246 6.92013 12.7877C6.31416 12.2716 5.72994 11.7865 5.2145 11.3587L5.21187 11.3564C3.70068 10.1019 2.39571 9.01857 1.48773 7.95137C0.472755 6.7583 0 5.62711 0 4.39134C0 3.19069 0.42263 2.08302 1.18996 1.27222C1.96644 0.451832 3.03188 0 4.19037 0C5.05623 0 5.84919 0.266662 6.54716 0.792517C6.89941 1.05795 7.2187 1.38281 7.5 1.76173C7.78141 1.38281 8.10059 1.05795 8.45295 0.792517C9.15092 0.266662 9.94389 0 10.8097 0C11.9681 0 13.0337 0.451832 13.8102 1.27222C14.5775 2.08302 15 3.19069 15 4.39134C15 5.62711 14.5274 6.7583 13.5124 7.95126C12.6044 9.01857 11.2996 10.1018 9.78859 11.3562C9.27223 11.7847 8.6871 12.2706 8.07976 12.788C7.91943 12.9246 7.71343 13 7.5 13ZM4.19037 0.85595C3.28022 0.85595 2.44411 1.20979 1.83586 1.85237C1.21857 2.50464 0.878563 3.4063 0.878563 4.39134C0.878563 5.43068 1.2751 6.3602 2.16419 7.40522C3.02353 8.41535 4.30172 9.47643 5.78167 10.7051L5.78442 10.7073C6.3018 11.1368 6.88831 11.6238 7.49874 12.1437C8.11283 11.6228 8.70026 11.135 9.21867 10.7048C10.6985 9.4762 11.9766 8.41535 12.8359 7.40522C13.7249 6.3602 14.1214 5.43068 14.1214 4.39134C14.1214 3.4063 13.7814 2.50464 13.1641 1.85237C12.556 1.20979 11.7198 0.85595 10.8097 0.85595C10.143 0.85595 9.53087 1.06241 8.99036 1.46954C8.50868 1.83252 8.17314 2.29138 7.97642 2.61244C7.87525 2.77754 7.69718 2.87609 7.5 2.87609C7.30282 2.87609 7.12475 2.77754 7.02358 2.61244C6.82697 2.29138 6.49143 1.83252 6.00964 1.46954C5.46913 1.06241 4.85699 0.85595 4.19037 0.85595Z" fill="#B2B1B1"/></svg>
        </a>
        <a href="#" data-action-click="like.toggleLike" data-action-url="<?= $unlikeUrl ?>" class="unlike likeAnchor<?= !$canLike ? ' disabled' : '' ?>" style="<?= ($currentUserLiked) ? '' : 'display:none'?>">
            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="13" viewBox="0 0 15 13" fill="none"><path d="M7.5 13C7.28645 13 7.08057 12.9246 6.92013 12.7877C6.31416 12.2716 5.72994 11.7865 5.2145 11.3587L5.21187 11.3564C3.70068 10.1019 2.39571 9.01857 1.48773 7.95137C0.472755 6.7583 0 5.62711 0 4.39134C0 3.19069 0.42263 2.08302 1.18996 1.27222C1.96644 0.451832 3.03188 0 4.19037 0C5.05623 0 5.84919 0.266662 6.54716 0.792517C6.89941 1.05795 7.2187 1.38281 7.5 1.76173C7.78141 1.38281 8.10059 1.05795 8.45295 0.792517C9.15092 0.266662 9.94389 0 10.8097 0C11.9681 0 13.0337 0.451832 13.8102 1.27222C14.5775 2.08302 15 3.19069 15 4.39134C15 5.62711 14.5274 6.7583 13.5124 7.95126C12.6044 9.01857 11.2996 10.1018 9.78859 11.3562C9.27223 11.7847 8.6871 12.2706 8.07976 12.788C7.91943 12.9246 7.71343 13 7.5 13V13ZM4.19037 0.85595C3.28022 0.85595 2.44411 1.20979 1.83586 1.85237C1.21857 2.50464 0.878563 3.4063 0.878563 4.39134C0.878563 5.43068 1.2751 6.3602 2.16419 7.40522C3.02353 8.41535 4.30172 9.47643 5.78167 10.7051L5.78442 10.7073C6.3018 11.1368 6.88831 11.6238 7.49874 12.1437C8.11283 11.6228 8.70026 11.135 9.21867 10.7048C10.6985 9.4762 11.9766 8.41535 12.8359 7.40522C13.7249 6.3602 14.1214 5.43068 14.1214 4.39134C14.1214 3.4063 13.7814 2.50464 13.1641 1.85237C12.556 1.20979 11.7198 0.85595 10.8097 0.85595C10.143 0.85595 9.53087 1.06241 8.99036 1.46954C8.50868 1.83252 8.17314 2.29138 7.97642 2.61244C7.87525 2.77754 7.69718 2.87609 7.5 2.87609C7.30282 2.87609 7.12475 2.77754 7.02358 2.61244C6.82697 2.29138 6.49143 1.83252 6.00964 1.46954C5.46913 1.06241 4.85699 0.85595 4.19037 0.85595V0.85595Z" fill="#F7A392"/></svg>
        </a>
    <?php endif; ?>

    <!-- Create link to show all users, who liked this -->
    <a href="<?= $userListUrl; ?>" data-target="#globalModal">
        <?php if (count($likes)) : ?>
            <span class="likeCount tt" data-placement="top" data-toggle="tooltip" title="<?= $title ?>"><?= count($likes) ?></span>
        <?php else: ?>
            <span class="likeCount"></span>
        <?php endif; ?>
    </a>

</span>
